var R=Object.defineProperty;var T=(n,t,s)=>t in n?R(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var g=(n,t,s)=>(T(n,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))r(h);new MutationObserver(h=>{for(const o of h)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(h){const o={};return h.integrity&&(o.integrity=h.integrity),h.referrerPolicy&&(o.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?o.credentials="include":h.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(h){if(h.ep)return;h.ep=!0;const o=s(h);fetch(h.href,o)}})();class l{constructor(t,s){g(this,"x");g(this,"y");this.x=t,this.y=s}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}sub(t){return new l(this.x-t.x,this.y-t.y)}add(t){return new l(this.x+t.x,this.y+t.y)}mul(t){return new l(t*this.x,t*this.y)}normalize(){let t=this.mag();return new l(this.x/t,this.y/t)}withMag(t){const s=this.normalize();return new l(s.x*t,s.y*t)}dot(t){return this.x*t.x+this.y*t.y}}const d=document.querySelector("canvas"),e=d==null?void 0:d.getContext("2d"),u=35;var c=(n=>(n[n.ACTIVE=0]="ACTIVE",n[n.DEAD=1]="DEAD",n[n.WINNER=2]="WINNER",n))(c||{}),w=(n=>(n[n.PAUSED=0]="PAUSED",n[n.STARTED=1]="STARTED",n[n.OVER=2]="OVER",n))(w||{});class S{constructor(t=0,s=0,r=0,h=1,o=[],a=[],f=[],E=0){this.width=t,this.height=s,this.status=r,this.scale=h,this.players=o,this.balls=a,this.stars=f,this.frame=E,this.width=t,this.height=s,this.status=r,this.scale=h,this.players=o,this.balls=a;for(let v=0;v<70;v++){const A=Math.random()*this.width,P=Math.random()*this.height,D=Math.random()*3,I=Math.random();this.stars.push({x:A,y:P,r:D,alpha:I})}}reset(){this.resize(),this.balls.forEach(t=>{t.reset(this)}),this.status=0}resize(){const t=.75*window.innerWidth,s=.6*window.innerHeight;this.width=t,this.height=s,this.scale=Math.max(i.width,i.height)/1e3}setStars(t){for(let s=0;s<t;s++){const r=Math.random()*this.width,h=Math.random()*this.height,o=Math.random()*3,a=Math.random();this.stars.push({x:r,y:h,r:o,alpha:a})}}gameOver(){this.balls.reduce((s,r)=>r.state===0?s+1:s,0)===1&&(this.status=2)}}let i=new S(.75*window.innerWidth,.6*window.innerHeight);const O=()=>"#"+Math.floor((Math.random()*.9+.1)*16777215).toString(16);function C(n){let t=0,s=0;for(;Math.abs(t)<=.1;)t=Math.random()-.5;for(;Math.abs(s)<=.1;)s=Math.random()-.5;return new l(t,s).withMag(n)}function W(n,t,s){let r=new l(n/2,t/2);const h=new l(n/2,t/2);for(;r.sub(h).mag()<2*s;)r=new l(Math.random()*n,Math.random()*t);return r}class N{constructor(t=new l(0,0),s=new l(0,0),r=u,h=O(),o="",a=c.ACTIVE){this.pos=t,this.vel=s,this.radius=r,this.color=h,this.name=o,this.state=a,this.pos=t,this.vel=s,this.radius=r,this.color=h,this.name=o,this.state=a}reset(t){this.state=c.ACTIVE,this.pos=W(t.width,t.height,u),this.vel=C(7*t.scale),this.radius=u}collide(t){if(t==this||this.state!==c.ACTIVE||t.state!==c.ACTIVE)return;if(t.pos.sub(this.pos).mag()-(this.radius+t.radius)<0){const h=this.vel.sub(t.vel),o=this.pos.sub(t.pos),a=o.dot(o),f=h.dot(o);this.vel=this.vel.sub(o.mul(f/a)),this.vel.mag()<3&&(this.vel=this.vel.withMag(3)),t.vel=t.vel.add(o.mul(f/a)),t.vel.mag()<3&&(t.vel=t.vel.withMag(3))}}move(){if(this.state===c.WINNER){this.vel=this.pos.sub(new l(i.width/2,i.height/2)).withMag(2);return}this.state===c.DEAD&&(this.vel=this.vel.mul(-.95)),this.pos=this.pos.add(this.vel),this.pos.x<this.radius&&(this.pos.x=this.radius,this.vel.x=-this.vel.x),this.pos.x>i.width-this.radius&&(this.pos.x=i.width-this.radius,this.vel.x=-this.vel.x),this.pos.y<this.radius&&(this.pos.y=this.radius,this.vel.y=-this.vel.y),this.pos.y>i.height-this.radius&&(this.pos.y=i.height-this.radius,this.vel.y=-this.vel.y)}gone(){let r=new l(i.width/2,i.height/2).sub(this.pos).mag()-this.radius*2-5;this.state=r<0?c.DEAD:this.state}render(t){if(!e||!d)return;let r=20/u*this.radius*t*i.scale;e.strokeStyle=this.color,e.lineWidth=5*t*i.scale,this.state===c.DEAD&&(this.radius=this.radius<3?0:this.radius*.975,this.radius<3?r=0:r*=.975),e.beginPath(),e.arc(this.pos.x,this.pos.y,this.radius*t*i.scale,.4,Math.PI-.4),e.stroke(),e.beginPath(),e.arc(this.pos.x,this.pos.y,this.radius*t*i.scale,Math.PI+.4,-.4),e.stroke(),e.font=`bold ${r}px sans-serif`,e.textAlign="center",e.fillStyle=this.color,e.textBaseline="middle",e.fillText(this.name,this.pos.x,this.pos.y)}}const p=document.getElementById("players");p==null||p.addEventListener("input",function(n){const s=n.target.value.split(",");i.players=s.map(r=>r.trim()),i.balls=[],i.players.forEach(r=>{let h=new N;h.name=r,i.balls.push(h)}),i.reset()});const y=document.getElementById("playButton");y==null||y.addEventListener("click",function(t){window.cancelAnimationFrame(i.frame),i.reset(),i.status=w.STARTED,m()});function k(n,t,s,r,h){if(e){e.save(),e.beginPath(),e.translate(n,t),e.moveTo(0,0-s);for(let o=0;o<r;o++)e.rotate(Math.PI/r),e.lineTo(0,0-s*h),e.rotate(Math.PI/r),e.lineTo(0,0-s);e.closePath(),e.fillStyle="rgba(255, 215, 0, 0.7)",e.fill(),e.restore()}}function b(){if(e)for(const n of i.stars)e.fillStyle=`rgba(255, 255, 255, ${.5*n.alpha})`,e.beginPath(),e.arc(n.x,n.y,n.r*i.scale,0,2*Math.PI),e.fill()}function L(){!e||!d||(i.reset(),x(),window.addEventListener("resize",x),i.frame=window.requestAnimationFrame(m))}function m(){if(!e)return;e.fillStyle="black",e.strokeStyle="black",e.fillRect(0,0,i.width,i.height),e.strokeRect(0,0,i.width,i.height),b();const n=i.width/2,t=i.height/2;let s=u;k(i.width/2,i.height/2,1.4*s*i.scale,16,.65);for(let r=0;r<5;r++)e.fillStyle="rgba(255, 65, 0, 0.31)",e.beginPath(),e.arc(n,t,s*i.scale,0,2*Math.PI),e.closePath(),e.fill(),s/=1.8;if(i.status==w.STARTED){for(let r=0;r<i.balls.length;r++){i.balls[r].gone();for(let h=0;h<r;h++)i.balls[r].collide(i.balls[h])}for(let r=0;r<i.balls.length;r++)i.balls[r].move(),i.balls[r].render(1);if(i.gameOver(),i.status===w.OVER){window.cancelAnimationFrame(i.frame),M();return}i.frame=window.requestAnimationFrame(m)}}function M(){if(!e)return;e.fillStyle="black",e.strokeStyle="black",e.fillRect(0,0,i.width,i.height),e.strokeRect(0,0,i.width,i.height),b();const n=i.width/2,t=i.height/2,s=i.balls[0],r=20/u*s.radius*i.scale,h=`${s.name} wins!`;if(e.font=`bold ${r}px sans-serif`,e.fillStyle=s.color,e.textAlign="center",e.textBaseline="middle",e.fillText(h,n,t),s.radius+=.5,s.radius>100){s.radius=0,s.reset(i),window.cancelAnimationFrame(i.frame);return}i.frame=window.requestAnimationFrame(M)}function x(){if(!d||!e)return;const n=.75*window.innerWidth,t=.6*window.innerHeight;d.width=Math.floor(n*window.devicePixelRatio),d.height=Math.floor(t*window.devicePixelRatio),d.style.width=n+"px",d.style.height=t+"px",e.scale(window.devicePixelRatio,window.devicePixelRatio),i.width=n,i.height=t,i.scale=Math.max(i.width,i.height)/1e3,m()}L();
