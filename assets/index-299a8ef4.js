var O=Object.defineProperty;var T=(r,t,s)=>t in r?O(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var p=(r,t,s)=>(T(r,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&h(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function h(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();class l{constructor(t,s){p(this,"x");p(this,"y");this.x=t,this.y=s}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}sub(t){return new l(this.x-t.x,this.y-t.y)}add(t){return new l(this.x+t.x,this.y+t.y)}mul(t){return new l(t*this.x,t*this.y)}normalize(){let t=this.mag();return new l(this.x/t,this.y/t)}withMag(t){const s=this.normalize();return new l(s.x*t,s.y*t)}dot(t){return this.x*t.x+this.y*t.y}}const d=document.querySelector("canvas"),e=d==null?void 0:d.getContext("2d"),f=35;var c=(r=>(r[r.ALIVE=0]="ALIVE",r[r.DEAD=1]="DEAD",r))(c||{}),w=(r=>(r[r.PAUSED=0]="PAUSED",r[r.STARTED=1]="STARTED",r[r.OVER=2]="OVER",r))(w||{});class k{constructor(t=0,s=0,h=0,n=1,a=[],o=[],u=[],P=0,D=0){this.width=t,this.height=s,this.status=h,this.scale=n,this.players=a,this.balls=o,this.stars=u,this.frame=P,this.runnerUp=D,this.width=t,this.height=s,this.status=h,this.scale=n,this.players=a,this.balls=o;for(let b=0;b<70;b++){const I=Math.random()*this.width,L=Math.random()*this.height,R=Math.random()*3,S=Math.random();this.stars.push({x:I,y:L,r:R,alpha:S})}}reset(){this.resize(),this.balls.forEach(t=>{t.reset(this)}),this.status=0}resize(){const t=.75*window.innerWidth,s=.6*window.innerHeight;this.width=t,this.height=s,this.scale=Math.max(i.width,i.height)/1e3}setStars(t){for(let s=0;s<t;s++){const h=Math.random()*this.width,n=Math.random()*this.height,a=Math.random()*3,o=Math.random();this.stars.push({x:h,y:n,r:a,alpha:o})}}gameOver(){this.balls.reduce((s,h)=>h.state===0?s+1:s,0)===1&&(this.status=2)}}let i=new k(.75*window.innerWidth,.6*window.innerHeight);const m=.4,y=.95;function F(r){let t=0,s=0;for(;Math.abs(t)<=.1;)t=Math.random()-.5;for(;Math.abs(s)<=.1;)s=Math.random()-.5;return new l(t,s).withMag(r)}function $(r,t,s){let h=new l(r/2,t/2);const n=new l(r/2,t/2);for(;h.sub(n).mag()<2*s;)h=new l(Math.random()*r,Math.random()*t);return h}class q{constructor(t=0,s=0,h=0,n=1){this.r=t,this.g=s,this.b=h,this.a=n,this.r=t,this.g=s,this.b=h,this.a=n}color(){return`rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`}setAlpha(t){this.a=t}random(){this.r=Math.floor(Math.random()*200+55),this.g=Math.floor(Math.random()*200+55),this.b=Math.floor(Math.random()*200+55)}}class U{constructor(t=0,s=new l(0,0),h=new l(0,0),n=f,a=new q,o="",u=c.ALIVE){this.id=t,this.pos=s,this.vel=h,this.radius=n,this.color=a,this.name=o,this.state=u,this.id=t,this.pos=s,this.vel=h,this.radius=n,a.random(),this.color=a,this.name=o,this.state=u}reset(t){this.state=c.ALIVE,this.pos=$(t.width,t.height,f),this.vel=F(7*t.scale),this.radius=f,this.color.setAlpha(1)}collide(t){if(t==this||this.state!==c.ALIVE||t.state!==c.ALIVE)return;if(t.pos.sub(this.pos).mag()-(this.radius+t.radius)<0){const n=this.vel.sub(t.vel),a=this.pos.sub(t.pos),o=a.dot(a),u=n.dot(a);this.vel=this.vel.sub(a.mul(u/o)),this.vel.mag()<3&&(this.vel=this.vel.withMag(3)),t.vel=t.vel.add(a.mul(u/o)),t.vel.mag()<3&&(t.vel=t.vel.withMag(3))}}move(){this.state===c.DEAD&&(this.vel=this.vel.mul(-.95)),this.pos=this.pos.add(this.vel),this.pos.x<this.radius&&(this.pos.x=this.radius,this.vel.x=-this.vel.x),this.pos.x>i.width-this.radius&&(this.pos.x=i.width-this.radius,this.vel.x=-this.vel.x),this.pos.y<this.radius&&(this.pos.y=this.radius,this.vel.y=-this.vel.y),this.pos.y>i.height-this.radius&&(this.pos.y=i.height-this.radius,this.vel.y=-this.vel.y)}gone(){new l(i.width/2,i.height/2).sub(this.pos).mag()-this.radius*2-5<0&&(this.state=c.DEAD,i.runnerUp=this.id)}render(t){if(!e||!d)return;let s=20/f*this.radius*t*i.scale;e.strokeStyle=this.color.color(),e.lineWidth=5*t*i.scale,this.state===c.DEAD&&(this.radius=this.radius<3?0:this.radius*y,this.radius<3?s=0:s*=y,this.color.setAlpha(y*this.radius/f)),e.beginPath(),e.arc(this.pos.x,this.pos.y,this.radius*t*i.scale,m,Math.PI-m),e.stroke(),e.beginPath(),e.arc(this.pos.x,this.pos.y,this.radius*t*i.scale,Math.PI+m,-m),e.stroke(),e.font=`bold ${s}px sans-serif`,e.textAlign="center",e.fillStyle=this.color.color(),e.textBaseline="middle",e.fillText(this.name,this.pos.x,this.pos.y)}}const v=document.getElementById("players");v==null||v.addEventListener("input",function(r){const s=r.target.value.split(",");i.players=s.map(h=>h.trim()),i.balls=[],i.players.forEach((h,n)=>{let a=new U;a.name=h,a.id=n,i.balls.push(a)}),i.reset()});const x=document.getElementById("playButton");x==null||x.addEventListener("click",function(t){window.cancelAnimationFrame(i.frame),i.reset(),i.status=w.STARTED,g()});function V(r,t,s,h,n){if(e){e.save(),e.beginPath(),e.translate(r,t),e.moveTo(0,0-s);for(let a=0;a<h;a++)e.rotate(Math.PI/h),e.lineTo(0,0-s*n),e.rotate(Math.PI/h),e.lineTo(0,0-s);e.closePath(),e.fillStyle="rgba(255, 215, 0, 0.7)",e.fill(),e.restore()}}function A(){if(e)for(const r of i.stars)e.fillStyle=`rgba(255, 255, 255, ${.5*r.alpha})`,e.beginPath(),e.arc(r.x,r.y,r.r*i.scale,0,2*Math.PI),e.fill()}function W(){!e||!d||(i.reset(),M(),window.addEventListener("resize",M),i.frame=window.requestAnimationFrame(g))}function g(){if(!e)return;e.fillStyle="black",e.strokeStyle="black",e.fillRect(0,0,i.width,i.height),e.strokeRect(0,0,i.width,i.height),A();const r=i.width/2,t=i.height/2;let s=f;V(i.width/2,i.height/2,1.4*s*i.scale,16,.65);for(let h=0;h<5;h++)e.fillStyle="rgba(255, 65, 0, 0.31)",e.beginPath(),e.arc(r,t,s*i.scale,0,2*Math.PI),e.closePath(),e.fill(),s/=1.8;if(i.status!==w.PAUSED){for(let h=0;h<i.balls.length;h++){i.balls[h].gone();for(let n=0;n<h;n++)i.balls[h].collide(i.balls[n])}for(let h=0;h<i.balls.length;h++)i.balls[h].move(),i.balls[h].render(1);if(i.gameOver(),i.status===w.OVER&&i.balls[i.runnerUp].radius<3){window.cancelAnimationFrame(i.frame),E();return}i.frame=window.requestAnimationFrame(g)}}function E(){if(!e)return;e.fillStyle="black",e.strokeStyle="black",e.fillRect(0,0,i.width,i.height),e.strokeRect(0,0,i.width,i.height),A();const r=i.width/2,t=i.height/2,s=i.balls.filter(a=>a.state===c.ALIVE)[0],h=20/f*s.radius*i.scale,n=`${s.name}`;if(e.font=`bold ${h}px sans-serif`,s.color.setAlpha(1),e.fillStyle=s.color.color(),e.textAlign="center",e.textBaseline="middle",e.fillText(n,r,t),s.radius+=.5,s.radius>100){s.reset(i),window.cancelAnimationFrame(i.frame);return}i.frame=window.requestAnimationFrame(E)}function M(){if(!d||!e)return;const r=.75*window.innerWidth,t=.6*window.innerHeight;d.width=Math.floor(r*window.devicePixelRatio),d.height=Math.floor(t*window.devicePixelRatio),d.style.width=r+"px",d.style.height=t+"px",e.scale(window.devicePixelRatio,window.devicePixelRatio),i.width=r,i.height=t,i.scale=Math.max(i.width,i.height)/1e3,g()}W();
