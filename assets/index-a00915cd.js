(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function t(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(l){if(l.ep)return;l.ep=!0;const n=t(l);fetch(l.href,n)}})();class c{constructor(i,t){this.x=i,this.y=t}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}sub(i){return new c(this.x-i.x,this.y-i.y)}add(i){return new c(this.x+i.x,this.y+i.y)}mul(i){return new c(i*this.x,i*this.y)}normalize(){let i=this.mag();return new c(this.x/i,this.y/i)}withMag(i){const t=this.normalize();return new c(t.x*i,t.y*i)}dot(i){return this.x*i.x+this.y*i.y}distance(i){return this.sub(i).mag()}}const d=document.querySelector("canvas"),e=d==null?void 0:d.getContext("2d"),u=40;var a=(s=>(s[s.ALIVE=0]="ALIVE",s[s.DEAD=1]="DEAD",s))(a||{}),f=(s=>(s[s.PAUSED=0]="PAUSED",s[s.STARTED=1]="STARTED",s[s.OVER=2]="OVER",s))(f||{});class q{constructor(i=0,t=0,r=0,l=1,n=[],h=[],w=[],R=0,I=0){this.width=i,this.height=t,this.status=r,this.scale=l,this.players=n,this.balls=h,this.stars=w,this.frame=R,this.runnerUp=I;for(let E=0;E<70;E++){const L=Math.random()*this.width,T=Math.random()*this.height,g=Math.random()*3,O=Math.random();this.stars.push({x:L,y:T,r:g,alpha:O})}}center(){return new c(this.width/2,this.height/2)}reset(){this.resize(),this.balls.forEach(i=>{i.reset(this)}),this.status=0}resize(){const i=.75*window.innerWidth,t=.6*window.innerHeight;this.width=i,this.height=t,this.scale=Math.sqrt(o.width*o.height)/1e3}setStars(i){for(let t=0;t<i;t++){const r=Math.random()*this.width,l=Math.random()*this.height,n=Math.random()*3,h=Math.random();this.stars.push({x:r,y:l,r:n,alpha:h})}}gameOver(){this.balls.reduce((t,r)=>r.state===0?t+1:t,0)===1&&(this.status=2)}winners(){return this.balls.filter(i=>i.state===0)}}let o=new q(.75*window.innerWidth,.6*window.innerHeight);const v=.4,x=.95,y=.25;function F(s){let i=0,t=0;for(;Math.abs(i)<=.1;)i=Math.random()-.5;for(;Math.abs(t)<=.1;)t=Math.random()-.5;return new c(i,t).withMag(s)}function k(s,i,t){let r=new c(s/2,i/2);const l=new c(s/2,i/2);for(;r.sub(l).mag()<2*t;)r=new c(Math.random()*s,Math.random()*i);return r}function b(s,i){let t=Math.atan2(s.y,s.x);t+=i*(Math.random()-.5);const r=s.mag();return new c(r*Math.cos(t),r*Math.sin(t))}class W{constructor(i=0,t=0,r=0,l=1){this.r=i,this.g=t,this.b=r,this.a=l}color(){return`rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`}setAlpha(i){this.a=i}random(){this.r=Math.floor(Math.random()*200+55),this.g=Math.floor(Math.random()*200+55),this.b=Math.floor(Math.random()*200+55)}}class ${constructor(i,t=0,r=new c(0,0),l=new c(0,0),n=new W,h="",w=a.ALIVE){this.radius=i,this.id=t,this.pos=r,this.vel=l,this.color=n,this.name=h,this.state=w,n.random(),this.color=n}reset(i){this.state=a.ALIVE,this.pos=k(i.width,i.height,u*i.scale),this.vel=F(4*i.scale),this.radius=u*i.scale,this.color.setAlpha(1)}collide(i){if(i==this||this.state!==a.ALIVE||i.state!==a.ALIVE)return;if(i.pos.sub(this.pos).mag()-(this.radius+i.radius)<0){const l=this.vel.sub(i.vel),n=this.pos.sub(i.pos),h=n.dot(n),w=l.dot(n);this.vel=this.vel.sub(n.mul(w/h)),this.vel.mag()<3&&(this.vel=this.vel.withMag(3)),this.vel.mag()>7&&(this.vel=this.vel.withMag(7)),i.vel=i.vel.add(n.mul(w/h)),i.vel.mag()<3&&(i.vel=i.vel.withMag(3)),i.vel.mag()>7&&(i.vel=i.vel.withMag(7))}}move(i){this.state===a.DEAD&&(this.vel=new c(0,0)),this.pos=this.pos.add(this.vel),this.pos.x<this.radius&&(this.pos.x=this.radius,this.vel.x=-this.vel.x,this.vel=b(this.vel,y)),this.pos.x>i.width-this.radius&&(this.pos.x=i.width-this.radius,this.vel.x=-this.vel.x,this.vel=b(this.vel,y)),this.pos.y<this.radius&&(this.pos.y=this.radius,this.vel.y=-this.vel.y,this.vel=b(this.vel,y)),this.pos.y>i.height-this.radius&&(this.pos.y=i.height-this.radius,this.vel.y=-this.vel.y,this.vel=b(this.vel,y))}gone(i){i.center().sub(this.pos).mag()-this.radius*2-5<0&&i.status!==f.OVER&&(this.state=a.DEAD,i.runnerUp=this.id)}render(i,t){if(!e||!d)return;let r=35/u*this.radius*t*i.scale;e.strokeStyle=this.color.color(),e.lineWidth=6*t*i.scale,this.state===a.DEAD&&(this.radius=this.radius<3?0:this.radius*x,this.radius<3?r=0:r*=x,this.color.setAlpha(x*this.radius/u)),e.beginPath(),e.arc(this.pos.x,this.pos.y,this.radius*t,v,Math.PI-v),e.stroke(),e.beginPath(),e.arc(this.pos.x,this.pos.y,this.radius*t,Math.PI+v,-v),e.stroke(),e.font=`bold ${r}px sans-serif`,e.textAlign="center",e.fillStyle=this.color.color(),e.textBaseline="middle",e.fillText(this.name,this.pos.x,this.pos.y)}}const M=document.getElementById("players");M==null||M.addEventListener("input",function(s){const i=s.target,t=i.value.split(",");o.players=t.map(r=>r.trim()),o.balls=[],o.players.forEach((r,l)=>{let n=new $(u*o.scale);n.name=r,n.id=l,o.balls.push(n)}),o.reset(),localStorage&&localStorage.setItem("players",i.value)});const A=document.getElementById("playButton");A==null||A.addEventListener("click",function(i){window.cancelAnimationFrame(o.frame),o.reset(),o.status=f.STARTED,p(o)});function U(s,i,t,r,l){if(!e)return;e.save(),e.beginPath(),e.translate(s,i),e.moveTo(0,0-t);for(let h=0;h<r;h++)e.rotate(Math.PI/r),e.lineTo(0,0-t*l),e.rotate(Math.PI/r),e.lineTo(0,0-t);e.closePath(),e.fillStyle="rgba(255, 215, 0, 0.7)",e.fill(),e.restore();let n=t/1.4;for(let h=0;h<5;h++)e.fillStyle="rgba(255, 65, 0, 0.31)",e.beginPath(),e.arc(s,i,n*o.scale,0,2*Math.PI),e.closePath(),e.fill(),n/=1.8}function P(){if(e)for(const s of o.stars)e.fillStyle=`rgba(255, 255, 255, ${.5*s.alpha})`,e.beginPath(),e.arc(s.x,s.y,s.r*o.scale,0,2*Math.PI),e.fill()}function V(s){if(!e||!d)return;s.reset(),m(s),window.addEventListener("resize",()=>m(s));const i=localStorage.getItem("players"),t=document.getElementById("players");i&&t&&(t.value=i,s.frame=window.requestAnimationFrame(()=>p(s)),t==null||t.dispatchEvent(new Event("input"))),s.frame=window.requestAnimationFrame(()=>p(s))}function p(s){if(!e)return;e.fillStyle="black",e.strokeStyle="black",e.fillRect(0,0,s.width,s.height),e.strokeRect(0,0,s.width,s.height),P();let i=u;if(s.status===f.STARTED&&U(s.center().x,s.center().y,1.4*i*s.scale,16,.65),s.status!==f.PAUSED){for(let t=0;t<s.balls.length;t++){s.balls[t].gone(s);for(let r=0;r<t;r++)s.balls[t].collide(s.balls[r])}for(let t=0;t<s.balls.length;t++)s.balls[t].move(s),s.balls[t].render(s,1);if(s.gameOver(),s.status===f.OVER){let t=s.winners()[0];if(t.vel=s.center().sub(t.pos),t.vel=t.vel.withMag(3),s.balls[s.runnerUp].radius<3&&t.pos.distance(s.center())<3){window.cancelAnimationFrame(s.frame),D(s);return}}s.frame=window.requestAnimationFrame(()=>p(s)),console.log(s.frame)}}function D(s){if(!e)return;e.fillStyle="black",e.strokeStyle="black",e.fillRect(0,0,s.width,s.height),e.strokeRect(0,0,s.width,s.height),P();const i=s.winners()[0],t=25/u*i.radius*s.scale,r=`${i.name}`;if(e.font=`bold ${t}px sans-serif`,i.color.setAlpha(1),e.fillStyle=i.color.color(),e.textAlign="center",e.textBaseline="middle",e.fillText(r,s.center().x,s.center().y),(s.players.includes("Reed")||s.players.includes("reed"))&&(e.fillStyle="white",e.fillText("Happy 30th Brithday Reed!",s.center().x,s.center().y+75)),i.radius+=.5,i.radius>100){i.reset(s),window.cancelAnimationFrame(s.frame);return}s.frame=window.requestAnimationFrame(()=>D(s))}function m(s){if(!d||!e)return;const i=.75*window.innerWidth,t=.6*window.innerHeight;d.width=Math.floor(i*window.devicePixelRatio),d.height=Math.floor(t*window.devicePixelRatio),d.style.width=i+"px",d.style.height=t+"px",e.scale(window.devicePixelRatio,window.devicePixelRatio),s.width=i,s.height=t,s.scale=Math.sqrt(s.width*s.height)/1e3,s.status!==f.STARTED&&(s.frame=window.requestAnimationFrame(()=>p(s)))}V(o);
